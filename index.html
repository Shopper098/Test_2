<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>IoT Dashboard</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 30px; }
    .card { background: #fff; border-radius: 8px; padding: 20px; margin: 20px auto; width: 300px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    button { padding: 10px 20px; margin: 10px; font-size: 1em; }
    .light { font-size: 2em; }
  </style>
</head>
<body>

  <h2>à¸ªà¸–à¸²à¸™à¸°à¹€à¸‹à¹‡à¸™à¹€à¸‹à¸­à¸£à¹Œ</h2>
  <div class="card">
    <p>ğŸŒ¡ï¸ à¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´: <span id="temp">--</span> Â°C</p>
    <p>ğŸ’§ à¸„à¸§à¸²à¸¡à¸Šà¸·à¹‰à¸™: <span id="humi">--</span> %</p>
  </div>

  <h2>à¸„à¸§à¸šà¸„à¸¸à¸¡à¹„à¸Ÿ</h2>
  <div class="card">
    <p>à¹„à¸Ÿ 1: <span id="led1" class="light">ğŸ’¤</span></p>
    <button onclick="toggleLED(1)">Switch 1</button>
    <p>à¹„à¸Ÿ 2: <span id="led2" class="light">ğŸ’¤</span></p>
    <button onclick="toggleLED(2)">Switch 2</button>
  </div>

<script>
  // âœ… à¹ƒà¸ªà¹ˆ Firebase config à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸—à¸µà¹ˆà¸™à¸µà¹ˆ
  const firebaseConfig = {
  apiKey: "AIzaSyAivnxCGRZWoD1VhRCiwggUDOOo86lamiI",
  authDomain: "test-9b890.firebaseapp.com",
  databaseURL: "https://test-9b890-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "test-9b890",
  storageBucket: "test-9b890.firebasestorage.app",
  messagingSenderId: "589658096120",
  appId: "1:589658096120:web:f0d624b378c872d34dd60d",
  measurementId: "G-NMPV5KFE2F"
  };

  // âœ… à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // ğŸ‘€ à¸­à¹ˆà¸²à¸™à¸„à¹ˆà¸²à¹€à¸‹à¹‡à¸™à¹€à¸‹à¸­à¸£à¹Œ
  db.ref('sensor').on('value', snapshot => {
    const data = snapshot.val();
    document.getElementById("temp").textContent = data.temperature;
    document.getElementById("humi").textContent = data.humidity;
  });

  // ğŸ‘€ à¸­à¹ˆà¸²à¸™à¸ªà¸–à¸²à¸™à¸°à¹„à¸Ÿ
  db.ref('led').on('value', snapshot => {
    const state = snapshot.val();
    document.getElementById("led1").textContent = state[1] === 1 ? 'ğŸ’¡' : 'ğŸ’¤';
    document.getElementById("led2").textContent = state[2] === 1 ? 'ğŸ’¡' : 'ğŸ’¤';
  });

  // ğŸ”˜ à¸ªà¸¥à¸±à¸šà¸ªà¸–à¸²à¸™à¸°à¹„à¸Ÿ
  function toggleLED(id) {
    const ledRef = db.ref('led/' + id);
    ledRef.once('value').then(snapshot => {
      const current = snapshot.val();
      ledRef.set(current === 1 ? 0 : 1);
    });
  }
</script>

</body>
</html>
